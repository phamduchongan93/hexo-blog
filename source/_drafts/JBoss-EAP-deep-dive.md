---
title: JBoss EAP deep dive
tags: [JBoss Java]
---

## What is JBoss EAP admin?
- "Application Server" 
  - Features:
    - Load Balancing 
    - HA cluster
    - VM for java apps
    - Webserver handling dynamic web page.
    - Focus on deployment 

- Take the advantages of java programming
- Untilizing JVM to deploy java web apps.


## Overview
- JBoss EAP is used and design to support java developers. Running java code on mutiple platform is ideal.
- Appication server is a runtime server took to deploy web services.
- JEE - platform to support apis and microservices.
- Inside component:
  - mod_cluster = module for cluster.
  - cache for the nodes 
  - messaging 
  - security susbsystem = LDAP solve authenticaion and authorization
  - database sysbsystem = handle database queries.



## Objectives - subsystems 
-	Undertow - Web server and servlet container
-	Infinispan - Caching for HA
-	Messaging/ActiveMQ - The integrated messaging provider
-	Logging - System and Application level logging
-	Elytron - Server and Application security
-	IIOP-OpenJDK - CORBA Services for ORB Services
-	EJB3 - Enterprise JavaBeans (containerized architecture - fexicble for deployment)
-	Datasources - Datasource configuration
-	ModCluster - Server-Side mod_cluster
-	WebServices - Web-related services
-	Deployment-scanner - Auto application deployment. 

## Architechture of JBoss 101
- Modules:  
  - logical grouping of classes.
  - used for class loading and dependency check
  - two types of modules: 
    - statics: locate at EAP_HOME/modules/
    - dynamics: generated by webservices 


## JBoss Admin daily tasks
- deploy application (manually) mostly
- create users and groups ( access rights)
- troubleshoot deployment failture
- automate tasks (snapshots and backups) 
- adding jboss instances. 
- configuring build automation
- set up workstation (IDE tools) 
- address performence issue 

## Sample of Deployment
- Devs generate and pull assests (stored in git sometimes) -> send throudh jboss -> deployment (ears and wars) -> send to Maven -> Build complete (CI stage).
- amins sometimes confiture connection to databases.


## Java Application Server (Jboss alternatives)
- weblogin (oracle) - propriety software - work with other oracle products (apis for databases)
- jetty (ellipse) - embedded system friendly OPENSOURCE
- tomcat (apache) - supported by apache foundation, not really for enternpise environment. OPENSOURCE (most popular)

## Installation
- prerequesit: openjdk-devel
  `sudo yum install java-11-openjdk-devel`

- Steps:
  1. `sudo java -jar jboss-eap-7.3.0.jar -console`
  2. Set up Path
  3. Component selection: Jboss EAP + Modules + docs
  4. Sett up admin account
  5. Select default runtime 
 
### Set Up a Service:
- In order to toggle the Jboss server, we prefer to have a Services configuration that can work with systemctl (systemd).
- Steps:
  - Create the user for servevice
    `sudo useradd --no-create-home --shell /bin/false/ jboss-eap`
  - Seting enviroment variable by opening the configuration file. Uncomment and change JBOSS_HOME and JAVA_HOME
    `vim <jboss_installed_path>/bin/init.d/jboss-eap.conf`

  ```
		# General configuration for the init.d scripts,
		# not necessarily for JBoss EAP itself.
		# default location: /etc/default/jboss-eap

		## Location of JDK
			JAVA_HOME="/usr/lib/jvm/default-java"

		## Location of JBoss EAP
			JBOSS_HOME="/opt/jboss-eap"

		## The username who should own the process.
		# JBOSS_USER=jboss-eap

		## The mode JBoss EAP should start, standalone or domain
		# JBOSS_MODE=standalone

		## Configuration for standalone mode
		# JBOSS_CONFIG=standalone.xml

		## Configuration for domain mode
		# JBOSS_DOMAIN_CONFIG=domain.xml
		# JBOSS_HOST_CONFIG=host-master.xml

		## The amount of time to wait for startup
		# STARTUP_WAIT=60

		## The amount of time to wait for shutdown
		# SHUTDOWN_WAIT=60

		## Location to keep the console log
		# JBOSS_CONSOLE_LOG="/var/log/jboss-eap/console.log"

		## Additionals args to include in startup
		# JBOSS_OPTS="--admin-only -b 127.0.0.1"
  ```
  - Copying the config file and script to /etc/init.d/ which is location for systemd.


## Configuring Standalone JBoss EAP Server
- Exposing the server through a port.
- There are two types of configuration: standle alone and managed domain.
  - standalone: configuration loaded on a single instance:
  - managedomain configuration: can be loaded on multiple domain.
  
- Steps Involeve:
  1. Update network address
     - Locate the file, update the '127.0.0.1' to '0.0.0.0' so that everyone can access the server'
       `cd <jboss_apps_path>/standalone/configuration/standalone.xml`
     - Locate <interface> </interface> block in standalone.xml. Change the address from 127.0.0.1 to 0.0.0.0

```
  <inet-address value="${jboss.bind.address:0.0.0.0}"/>
```

  2. Update users 
```
  vim <jboss_apps_parth>/standalone/configuration/mgmt-groups.properties
```
     - Add user to the group. In this case, anpham is the user I want to add to  the supergroup. Thus I will append the following line 'tina=superuser'
  3. Update the Log level
`sudo vim <jboss_apps_parth>/standalone/configuration/logging.properties` 
  set the log level to DEBUG
  logger.level=DEBUG
  4. Reload and Restart the server
`sudo systemctl restart jboss-eap-rhel`

## User Management and Role-bases Access Control
- `add-user.sh` script is used to create new user.
Example:
`sudo ./add-user.sh -u 'anpham -p 'password123' -g 'dev'`

- Roled Based Access Control (RBAC): 
```
  sudo ./jboss-cli.sh 
  connect
  cd /core-service=management/access=authorization
```
- 
## Application Deployment and Configuration
- Via web console
  - Using deployment tab -> upload the file -> deploy

- Via command line
  - `sudo ./bin/jobss cli.sh -c`
  - `deployment deploy-file /home/user/helloworld.war`
  - To chech the status `deployment info helloworld.war`
  - To disable the deployment, `deployment disable hellword.war`
  - To enable the deployment, `deployment enable hellword.war`

- Deployment scanner 

- Deployment using maven (using plugin)
  - `maven clean install widly:deploy`

- Deployment via HTTP API 
  - using curl command 

## Troubleshooting

## Performance Tunning and Optimization

# Source:
- Developers.redhats.com
- Linux Academy: JBoss EAP admin course.
